package o000O0Oo;

import OooO0oO.OooOo;
import OooO0oo.o00Oo0;
import OooOOOo.o0ooOOo;
import OooOOo.Oooo000;
import OooOOo0.o0Oo0oo;
import OooOOoo.o0000O;
import OoooO0O.o000O000;
import OoooO0O.o00O000o;
import OoooO0O.o00O00o0;
import OoooO0O.o00O0O0O;
import OoooO0O.o00oOoo;
import OoooO0O.o0OOO0o;
import OoooOOO.o0O0oo00;
import android.app.Application;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Handler;
import android.preference.PreferenceManager;
import android.util.Log;
import androidx.datastore.core.DataStore;
import com.applovin.impl.o0000O0;
import com.applovin.impl.o000O0O0;
import com.google.android.gms.internal.ads.C2051sk;
import com.google.android.gms.tasks.Task;
import com.google.android.gms.tasks.TaskCompletionSource;
import com.google.android.gms.tasks.Tasks;
import com.google.crypto.tink.shaded.protobuf.OooOO0O;
import com.google.crypto.tink.shaded.protobuf.o000OOo;
import java.io.BufferedInputStream;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.CharConversionException;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.nio.charset.StandardCharsets;
import java.security.GeneralSecurityException;
import java.security.KeyStoreException;
import java.security.NoSuchAlgorithmException;
import java.security.ProviderException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.Set;
import java.util.Stack;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.Executor;
import java.util.concurrent.atomic.AtomicBoolean;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.atomic.AtomicMarkableReference;
import o00000oo.o0OO00O;
import o00000oo.o0OoOo0;
import o0000OOo.o000OO0O;
import o0000OOo.o00O00O;
import o0000OOo.o00O0O0;
import o0000OOo.o00O0O00;
import o0000OOo.o00O0OO;
import o0000OOo.oo00o;
import o0000oo0.o00000OO;
import o0000oo0.o00Ooo;
import o0000oo0.oo0o0Oo;
import o000O00.o000;
import o000O00.o00000O0;
import o000O00.o0000OO0;
import o000O00.o000O00;
import o000O00.o000O0o;
import o000O00.o000OO;
import o000O00.o000OO00;
import o000O00.o000OOo0;
import o000O00.o000Oo0;
import o000O00.o00O0000;
import o000O00.o00OO0O0;
import o000O00.o0O0O00;
import o000O00.o0O0ooO;
import o000O00.o0o0Oo;
import o000Oo0.OooO;
import o000Oo0.OooOO0;
import o000Oo0.Oooo0;
import o000Oo0.o000oOoO;
import o000Oo00.OooOOO;
import o000Oo0O.OooOo00;
import o000Ooo.o000000O;
import o000Ooo.o0000Ooo;
import o000Ooo.o00O0O;
import o000o00o.oo0o0O0;
import o000o0O.oo000o;
import o000o0O0.OooOOO0;

/* loaded from: classes2.dex */
public final class OooO0o implements o0000O, o00oOoo, o00Ooo, OooOOO0 {

    /* renamed from: OooOo */
    public Object f30136OooOo;

    /* renamed from: OooOo0O */
    public final /* synthetic */ int f30137OooOo0O;

    /* renamed from: OooOo0o */
    public Object f30138OooOo0o;

    /* renamed from: OooOoO */
    public Object f30139OooOoO;

    /* renamed from: OooOoO0 */
    public Object f30140OooOoO0;

    /* renamed from: OooOoOO */
    public Object f30141OooOoOO;

    /* renamed from: OooOoo */
    public Object f30142OooOoo;

    /* renamed from: OooOoo0 */
    public Object f30143OooOoo0;

    public /* synthetic */ OooO0o(Object obj, Object obj2, Object obj3, Object obj4, Object obj5, Object obj6, Object obj7, int i) {
        this.f30137OooOo0O = i;
        this.f30138OooOo0o = obj;
        this.f30136OooOo = obj2;
        this.f30140OooOoO0 = obj3;
        this.f30139OooOoO = obj4;
        this.f30141OooOoOO = obj5;
        this.f30143OooOoo0 = obj6;
        this.f30142OooOoo = obj7;
    }

    public static o000O00.o0000O OooO0oO(o000O00.o0000O o0000o2, OooOO0 oooOO0, OooO0o oooO0o, Map map) {
        Map mapUnmodifiableMap;
        Map mapUnmodifiableMap2;
        Map mapUnmodifiableMap3;
        o000OO o000ooOooO00o = o0000o2.OooO00o();
        String strOooO0o0 = ((o000Oo0.OooO0o) oooOO0.f30343OooOo0o).OooO0o0();
        if (strOooO0o0 != null) {
            o000ooOooO00o.f29966OooO0o0 = new o000OO00(strOooO0o0);
        } else if (Log.isLoggable("FirebaseCrashlytics", 2)) {
            Log.v("FirebaseCrashlytics", "No log data to include with this event.", null);
        }
        boolean zIsEmpty = map.isEmpty();
        o0O0oo00 o0o0oo00 = (o0O0oo00) oooO0o.f30139OooOoO;
        if (zIsEmpty) {
            OooO oooO = (OooO) ((AtomicMarkableReference) o0o0oo00.f14470OooOo0o).getReference();
            synchronized (oooO) {
                mapUnmodifiableMap2 = Collections.unmodifiableMap(new HashMap(oooO.f30324OooO00o));
            }
        } else {
            OooO oooO2 = (OooO) ((AtomicMarkableReference) o0o0oo00.f14470OooOo0o).getReference();
            synchronized (oooO2) {
                mapUnmodifiableMap = Collections.unmodifiableMap(new HashMap(oooO2.f30324OooO00o));
            }
            HashMap map2 = new HashMap(mapUnmodifiableMap);
            int i = 0;
            for (Map.Entry entry : map.entrySet()) {
                String strOooO00o = OooO.OooO00o(1024, (String) entry.getKey());
                if (map2.size() < 64 || map2.containsKey(strOooO00o)) {
                    map2.put(strOooO00o, OooO.OooO00o(1024, (String) entry.getValue()));
                } else {
                    i++;
                }
            }
            if (i > 0) {
                Log.w("FirebaseCrashlytics", "Ignored " + i + " keys when adding event specific keys. Maximum allowable: 1024", null);
            }
            mapUnmodifiableMap2 = Collections.unmodifiableMap(map2);
        }
        List listOooOOOo = OooOOOo(mapUnmodifiableMap2);
        OooO oooO3 = (OooO) ((AtomicMarkableReference) ((o0O0oo00) oooO0o.f30141OooOoOO).f14470OooOo0o).getReference();
        synchronized (oooO3) {
            mapUnmodifiableMap3 = Collections.unmodifiableMap(new HashMap(oooO3.f30324OooO00o));
        }
        List listOooOOOo2 = OooOOOo(mapUnmodifiableMap3);
        if (!listOooOOOo.isEmpty() || !listOooOOOo2.isEmpty()) {
            o0000OO0 o0000oo02 = o0000o2.f29872OooO0OO;
            o000ooOooO00o.f29963OooO0OO = new o0000OO0(o0000oo02.f29901OooO00o, listOooOOOo, listOooOOOo2, o0000oo02.f29904OooO0Oo, o0000oo02.f29906OooO0o0, o0000oo02.f29905OooO0o, o0000oo02.f29907OooO0oO);
        }
        return o000ooOooO00o.OooO00o();
    }

    public static o0o0Oo OooO0oo(o000O00.o0000O o0000o2, OooO0o oooO0o) {
        List listOooO00o = ((o000oOoO) oooO0o.f30143OooOoo0).OooO00o();
        ArrayList arrayList = new ArrayList();
        for (int i = 0; i < listOooO00o.size(); i++) {
            Oooo0 oooo0 = (Oooo0) listOooO00o.get(i);
            oooo0.getClass();
            o000OOo0 o000ooo02 = new o000OOo0();
            o000Oo0.OooO0O0 oooO0O0 = (o000Oo0.OooO0O0) oooo0;
            String str = oooO0O0.f30337OooO0o0;
            if (str == null) {
                throw new NullPointerException("Null variantId");
            }
            String str2 = oooO0O0.f30333OooO0O0;
            if (str2 == null) {
                throw new NullPointerException("Null rolloutId");
            }
            o000ooo02.f29984OooO00o = new o00O0000(str2, str);
            String str3 = oooO0O0.f30334OooO0OO;
            if (str3 == null) {
                throw new NullPointerException("Null parameterKey");
            }
            o000ooo02.f29985OooO0O0 = str3;
            String str4 = oooO0O0.f30335OooO0Oo;
            if (str4 == null) {
                throw new NullPointerException("Null parameterValue");
            }
            o000ooo02.f29986OooO0OO = str4;
            o000ooo02.f29987OooO0Oo = oooO0O0.f30336OooO0o;
            o000ooo02.f29988OooO0o0 = (byte) (o000ooo02.f29988OooO0o0 | 1);
            arrayList.add(o000ooo02.OooO00o());
        }
        if (arrayList.isEmpty()) {
            return o0000o2;
        }
        o000OO o000ooOooO00o = o0000o2.OooO00o();
        o000ooOooO00o.f29965OooO0o = new o0O0ooO(arrayList);
        return o000ooOooO00o.OooO00o();
    }

    public static String OooOO0O(InputStream inputStream) throws IOException {
        BufferedInputStream bufferedInputStream = new BufferedInputStream(inputStream);
        try {
            ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
            try {
                byte[] bArr = new byte[8192];
                while (true) {
                    int i = bufferedInputStream.read(bArr);
                    if (i == -1) {
                        String string = byteArrayOutputStream.toString(StandardCharsets.UTF_8.name());
                        byteArrayOutputStream.close();
                        bufferedInputStream.close();
                        return string;
                    }
                    byteArrayOutputStream.write(bArr, 0, i);
                }
            } finally {
            }
        } catch (Throwable th) {
            try {
                bufferedInputStream.close();
            } catch (Throwable th2) {
                th.addSuppressed(th2);
            }
            throw th;
        }
    }

    public static OooO0o OooOO0o(Context context, o0000Ooo o0000ooo, OooO0o oooO0o, OoooO0O.o00Ooo o00ooo2, OooOO0 oooOO0, OooO0o oooO0o2, OooO0oO.OooOOO0 oooOOO0, o0ooOOo o0ooooo, OooOo00 oooOo00, o000Ooo.o00Ooo o00ooo3, o000O0O.OooO oooO) {
        o000000O o000000o2 = new o000000O(context, o0000ooo, o00ooo2, oooOOO0, o0ooooo);
        OooO0O0 oooO0O0 = new OooO0O0(oooO0o, o0ooooo, o00ooo3);
        o000O00O.OooO00o oooO00o = o000OO0O.OooO00o.f30197OooO0O0;
        o0Oo0oo.OooO0O0(context);
        return new OooO0o(o000000o2, oooO0O0, new o000OO0O.OooO00o(new o000OO0O.OooO0OO(o0Oo0oo.OooO00o().OooO0OO(new OooOOOO.OooO00o(o000OO0O.OooO00o.f30198OooO0OO, o000OO0O.OooO00o.f30199OooO0Oo)).OooO00o("FIREBASE_CRASHLYTICS_REPORT", new OooOOO.OooO0O0("json"), o000OO0O.OooO00o.f30200OooO0o0), o0ooooo.OooO0O0(), oooOo00)), oooOO0, oooO0o2, o0000ooo, oooO, 7);
    }

    public static List OooOOOo(Map map) {
        ArrayList arrayList = new ArrayList();
        arrayList.ensureCapacity(map.size());
        for (Map.Entry entry : map.entrySet()) {
            String str = (String) entry.getKey();
            if (str == null) {
                throw new NullPointerException("Null key");
            }
            String str2 = (String) entry.getValue();
            if (str2 == null) {
                throw new NullPointerException("Null value");
            }
            arrayList.add(new o00000O0(str, str2));
        }
        Collections.sort(arrayList, new o000O0O0(4));
        return Collections.unmodifiableList(arrayList);
    }

    public static synchronized void OooOOo(File file) {
        try {
            if (file.exists()) {
                if (file.isDirectory()) {
                    return;
                }
                String str = "Unexpected non-directory file: " + file + "; deleting file and creating new directory.";
                if (Log.isLoggable("FirebaseCrashlytics", 3)) {
                    Log.d("FirebaseCrashlytics", str, null);
                }
                file.delete();
            }
            if (!file.mkdirs()) {
                Log.e("FirebaseCrashlytics", "Could not create Crashlytics-specific directory: " + file, null);
            }
        } catch (Throwable th) {
            throw th;
        }
    }

    public static byte[] OooOOoo(Context context, String str, String str2) throws CharConversionException {
        if (str == null) {
            throw new IllegalArgumentException("keysetName cannot be null");
        }
        Context applicationContext = context.getApplicationContext();
        try {
            String string = (str2 == null ? PreferenceManager.getDefaultSharedPreferences(applicationContext) : applicationContext.getSharedPreferences(str2, 0)).getString(str, null);
            if (string == null) {
                return null;
            }
            return Oooo0o0.OooO.OooO0oo(string);
        } catch (ClassCastException | IllegalArgumentException unused) {
            throw new CharConversionException(OooOo.OooOO0O("can't read keyset; the pref value ", str, " is not a valid hex string"));
        }
    }

    public static List OooOo(Object[] objArr) {
        return objArr == null ? Collections.EMPTY_LIST : Arrays.asList(objArr);
    }

    public static o00000oo.o000oOoO OooOo00(byte[] bArr) throws IOException {
        ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(bArr);
        try {
            o00O0O0 o00o0o0OooOoo = o00O0O0.OooOoo(byteArrayInputStream, com.google.crypto.tink.shaded.protobuf.Oooo0.OooO00o());
            byteArrayInputStream.close();
            return new o00000oo.o000oOoO((oo00o) ((o00O0O0) Oooo.OooOo00.OooOO0o(o00o0o0OooOoo).f13712OooOo0o).OooOo0(), 3);
        } catch (Throwable th) {
            byteArrayInputStream.close();
            throw th;
        }
    }

    public static boolean OooOo0o(File file) {
        File[] fileArrListFiles = file.listFiles();
        if (fileArrListFiles != null) {
            for (File file2 : fileArrListFiles) {
                OooOo0o(file2);
            }
        }
        return file.delete();
    }

    public synchronized o0000O0O.OooO00o OooO() {
        o0000O0O.OooO00o oooO00o;
        try {
            if (((String) this.f30138OooOo0o) == null) {
                throw new IllegalArgumentException("keysetName cannot be null");
            }
            synchronized (o0000O0O.OooO00o.f29376OooO0O0) {
                try {
                    byte[] bArrOooOOoo = OooOOoo((Context) this.f30136OooOo, (String) this.f30138OooOo0o, (String) this.f30140OooOoO0);
                    if (bArrOooOOoo == null) {
                        if (((String) this.f30139OooOoO) != null) {
                            this.f30141OooOoOO = OooOo0O();
                        }
                        this.f30142OooOoo = OooOOO0();
                    } else if (((String) this.f30139OooOoO) != null) {
                        this.f30142OooOoo = OooOo0(bArrOooOOoo);
                    } else {
                        this.f30142OooOoo = OooOo00(bArrOooOOoo);
                    }
                    oooO00o = new o0000O0O.OooO00o(this);
                } finally {
                }
            }
        } catch (Throwable th) {
            throw th;
        }
        return oooO00o;
    }

    @Override // o0000oo0.o00Ooo
    public Set OooO00o(o00000OO o00000oo2) {
        if (((Set) this.f30139OooOoO).contains(o00000oo2)) {
            return ((o00Ooo) this.f30142OooOoo).OooO00o(o00000oo2);
        }
        throw new OooOOO0.OooO00o("Attempting to request an undeclared dependency Set<" + o00000oo2 + ">.");
    }

    @Override // o0000oo0.o00Ooo
    public OooOOO OooO0O0(o00000OO o00000oo2) {
        if (((Set) this.f30136OooOo).contains(o00000oo2)) {
            return ((o00Ooo) this.f30142OooOoo).OooO0O0(o00000oo2);
        }
        throw new OooOOO0.OooO00o("Attempting to request an undeclared dependency Provider<" + o00000oo2 + ">.");
    }

    @Override // o0000oo0.o00Ooo
    public OooOOO OooO0OO(o00000OO o00000oo2) {
        if (((Set) this.f30141OooOoOO).contains(o00000oo2)) {
            return ((o00Ooo) this.f30142OooOoo).OooO0OO(o00000oo2);
        }
        throw new OooOOO0.OooO00o("Attempting to request an undeclared dependency Provider<Set<" + o00000oo2 + ">>.");
    }

    @Override // o0000oo0.o00Ooo
    public o0000oo0.o00000O0 OooO0Oo(o00000OO o00000oo2) {
        if (((Set) this.f30140OooOoO0).contains(o00000oo2)) {
            return ((o00Ooo) this.f30142OooOoo).OooO0Oo(o00000oo2);
        }
        throw new OooOOO0.OooO00o("Attempting to request an undeclared dependency Deferred<" + o00000oo2 + ">.");
    }

    @Override // o0000oo0.o00Ooo
    public Object OooO0o(o00000OO o00000oo2) {
        if (((Set) this.f30138OooOo0o).contains(o00000oo2)) {
            return ((o00Ooo) this.f30142OooOoo).OooO0o(o00000oo2);
        }
        throw new OooOOO0.OooO00o("Attempting to request an undeclared dependency " + o00000oo2 + ".");
    }

    @Override // o0000oo0.o00Ooo
    public OooOOO OooO0o0(Class cls) {
        return OooO0O0(o00000OO.OooO00o(cls));
    }

    public void OooOO0(String str) {
        File file = new File((File) this.f30136OooOo, str);
        if (file.exists() && OooOo0o(file)) {
            String str2 = "Deleted previous Crashlytics file system: " + file.getPath();
            if (Log.isLoggable("FirebaseCrashlytics", 3)) {
                Log.d("FirebaseCrashlytics", str2, null);
            }
        }
    }

    public o0000oo0.o00000O0 OooOOO(Class cls) {
        return OooO0Oo(o00000OO.OooO00o(cls));
    }

    public o00000oo.o000oOoO OooOOO0() throws GeneralSecurityException, InterruptedException, IOException {
        if (((o0OoOo0) this.f30143OooOoo0) == null) {
            throw new GeneralSecurityException("cannot read or generate keyset");
        }
        o00000oo.o000oOoO o000oooo2 = new o00000oo.o000oOoO(o00O0O0.OooOoo0(), 3);
        o0OoOo0 o0oooo0 = (o0OoOo0) this.f30143OooOoo0;
        synchronized (o000oooo2) {
            o000oooo2.OooO00o(o0oooo0.f29301OooO00o);
        }
        int iOooOoO = o0OO00O.OooO00o((o00O0O0) o000oooo2.OooO0OO().f13712OooOo0o).OooOo().OooOoO();
        synchronized (o000oooo2) {
            for (int i = 0; i < ((o00O0O0) ((oo00o) o000oooo2.f29292OooO0O0).f28132OooOo0o).OooOoO0(); i++) {
                try {
                    o00O0O00 o00o0o00OooOo = ((o00O0O0) ((oo00o) o000oooo2.f29292OooO0O0).f28132OooOo0o).OooOo(i);
                    if (o00o0o00OooOo.OooOoOO() == iOooOoO) {
                        if (!o00o0o00OooOo.OooOoo().equals(o00O00O.ENABLED)) {
                            throw new GeneralSecurityException("cannot set key as primary because it's not enabled: " + iOooOoO);
                        }
                        oo00o oo00oVar = (oo00o) o000oooo2.f29292OooO0O0;
                        oo00oVar.OooO0Oo();
                        o00O0O0.OooOo0O((o00O0O0) oo00oVar.f28132OooOo0o, iOooOoO);
                    }
                } catch (Throwable th) {
                    throw th;
                }
            }
            throw new GeneralSecurityException("key not found: " + iOooOoO);
        }
        Context context = (Context) this.f30136OooOo;
        String str = (String) this.f30138OooOo0o;
        String str2 = (String) this.f30140OooOoO0;
        if (str == null) {
            throw new IllegalArgumentException("keysetName cannot be null");
        }
        Context applicationContext = context.getApplicationContext();
        SharedPreferences.Editor editorEdit = str2 == null ? PreferenceManager.getDefaultSharedPreferences(applicationContext).edit() : applicationContext.getSharedPreferences(str2, 0).edit();
        if (((o0000O0O.OooO0O0) this.f30141OooOoOO) != null) {
            Oooo.OooOo00 oooOo00OooO0OO = o000oooo2.OooO0OO();
            o0000O0O.OooO0O0 oooO0O0 = (o0000O0O.OooO0O0) this.f30141OooOoOO;
            byte[] bArr = new byte[0];
            o00O0O0 o00o0o0 = (o00O0O0) oooOo00OooO0OO.f13712OooOo0o;
            byte[] bArrOooO00o = oooO0O0.OooO00o(o00o0o0.OooO0Oo(), bArr);
            try {
                if (!o00O0O0.OooOooO(oooO0O0.OooO0O0(bArrOooO00o, bArr), com.google.crypto.tink.shaded.protobuf.Oooo0.OooO00o()).equals(o00o0o0)) {
                    throw new GeneralSecurityException("cannot encrypt keyset");
                }
                o000OO0O o000oo0oOooOoO0 = o0000OOo.o000O0O0.OooOoO0();
                OooOO0O oooOO0OOooO0oO = com.google.crypto.tink.shaded.protobuf.OooOOO0.OooO0oO(bArrOooO00o, 0, bArrOooO00o.length);
                o000oo0oOooOoO0.OooO0Oo();
                o0000OOo.o000O0O0.OooOo0O((o0000OOo.o000O0O0) o000oo0oOooOoO0.f28132OooOo0o, oooOO0OOooO0oO);
                o00O0OO o00o0ooOooO00o = o0OO00O.OooO00o(o00o0o0);
                o000oo0oOooOoO0.OooO0Oo();
                o0000OOo.o000O0O0.OooOo0o((o0000OOo.o000O0O0) o000oo0oOooOoO0.f28132OooOo0o, o00o0ooOooO00o);
                if (!editorEdit.putString(str, Oooo0o0.OooO.OooO(((o0000OOo.o000O0O0) o000oo0oOooOoO0.OooO00o()).OooO0Oo())).commit()) {
                    throw new IOException("Failed to write to SharedPreferences");
                }
            } catch (o000OOo unused) {
                throw new GeneralSecurityException("invalid keyset, corrupted key material");
            }
        } else if (!editorEdit.putString(str, Oooo0o0.OooO.OooO(((o00O0O0) o000oooo2.OooO0OO().f13712OooOo0o).OooO0Oo())).commit()) {
            throw new IOException("Failed to write to SharedPreferences");
        }
        return o000oooo2;
    }

    public File OooOOOO(String str, String str2) {
        File file = new File((File) this.f30139OooOoO, str);
        file.mkdirs();
        return new File(file, str2);
    }

    public void OooOOo0(Throwable th, Thread thread, String str, o000Oo0.OooO0OO oooO0OO, boolean z) {
        OooO0oO.OooOOO0 oooOOO0;
        Iterator<Map.Entry<Thread, StackTraceElement[]>> it;
        byte b;
        boolean zEquals = str.equals("crash");
        o000000O o000000o2 = (o000000O) this.f30138OooOo0o;
        Context context = o000000o2.f30449OooO00o;
        int i = context.getResources().getConfiguration().orientation;
        Stack stack = new Stack();
        for (Throwable cause = th; cause != null; cause = cause.getCause()) {
            stack.push(cause);
        }
        C2051sk c2051sk = null;
        while (true) {
            boolean zIsEmpty = stack.isEmpty();
            oooOOO0 = o000000o2.f30452OooO0Oo;
            if (zIsEmpty) {
                break;
            }
            Throwable th2 = (Throwable) stack.pop();
            c2051sk = new C2051sk(th2.getLocalizedMessage(), th2.getClass().getName(), oooOOO0.OooO0o(th2.getStackTrace()), c2051sk, 21);
        }
        o000OO o000oo2 = new o000OO();
        o000oo2.f29962OooO0O0 = str;
        o000oo2.f29961OooO00o = oooO0OO.f30339OooO0O0;
        o000oo2.f29967OooO0oO = (byte) (o000oo2.f29967OooO0oO | 1);
        o00OO0O0 o00oo0o0OooO0o0 = o000O000.OooO0OO.f30096OooO0O0.OooO0o0(context);
        int i2 = ((o000O00.o000OO0O) o00oo0o0OooO0o0).f29971OooO0OO;
        Boolean boolValueOf = i2 > 0 ? Boolean.valueOf(i2 != 100) : null;
        ArrayList arrayListOooO0Oo = o000O000.OooO0OO.OooO0Oo(context);
        byte b2 = (byte) 1;
        ArrayList arrayList = new ArrayList();
        StackTraceElement[] stackTraceElementArr = (StackTraceElement[]) c2051sk.f24100OooOoO0;
        String name = thread.getName();
        if (name == null) {
            throw new NullPointerException("Null name");
        }
        byte b3 = (byte) 1;
        List listOooO0Oo = o000000O.OooO0Oo(stackTraceElementArr, 4);
        if (listOooO0Oo == null) {
            throw new NullPointerException("Null frames");
        }
        Boolean bool = boolValueOf;
        if (b3 != 1) {
            StringBuilder sb = new StringBuilder();
            if (b3 == 0) {
                sb.append(" importance");
            }
            throw new IllegalStateException(o000Oo.o0OO00O.OooO0OO(sb, "Missing required properties:"));
        }
        arrayList.add(new o000O00(name, listOooO0Oo, 4));
        if (z) {
            Iterator<Map.Entry<Thread, StackTraceElement[]>> it2 = Thread.getAllStackTraces().entrySet().iterator();
            while (it2.hasNext()) {
                Map.Entry<Thread, StackTraceElement[]> next = it2.next();
                Thread key = next.getKey();
                if (key.equals(thread)) {
                    it = it2;
                    b = b3;
                } else {
                    StackTraceElement[] stackTraceElementArrOooO0o = oooOOO0.OooO0o(next.getValue());
                    String name2 = key.getName();
                    if (name2 == null) {
                        throw new NullPointerException("Null name");
                    }
                    it = it2;
                    List listOooO0Oo2 = o000000O.OooO0Oo(stackTraceElementArrOooO0o, 0);
                    if (listOooO0Oo2 == null) {
                        throw new NullPointerException("Null frames");
                    }
                    if (b3 != 1) {
                        byte b4 = b3;
                        StringBuilder sb2 = new StringBuilder();
                        if (b4 == 0) {
                            sb2.append(" importance");
                        }
                        throw new IllegalStateException(o000Oo.o0OO00O.OooO0OO(sb2, "Missing required properties:"));
                    }
                    b = b3;
                    arrayList.add(new o000O00(name2, listOooO0Oo2, 0));
                }
                it2 = it;
                b3 = b;
            }
        }
        List listUnmodifiableList = Collections.unmodifiableList(arrayList);
        o000O0o o000o0oOooO0OO = o000000O.OooO0OO(c2051sk, 0);
        o000Oo0 o000oo0OooO0o0 = o000000O.OooO0o0();
        List listOooO00o = o000000o2.OooO00o();
        if (listOooO00o == null) {
            throw new NullPointerException("Null binaries");
        }
        o000 o000Var = new o000(listUnmodifiableList, o000o0oOooO0OO, null, o000oo0OooO0o0, listOooO00o);
        if (b2 != 1) {
            StringBuilder sb3 = new StringBuilder();
            if (b2 == 0) {
                sb3.append(" uiOrientation");
            }
            throw new IllegalStateException(o000Oo.o0OO00O.OooO0OO(sb3, "Missing required properties:"));
        }
        o000oo2.f29963OooO0OO = new o0000OO0(o000Var, null, null, bool, o00oo0o0OooO0o0, arrayListOooO0Oo, i);
        o000oo2.f29964OooO0Oo = o000000o2.OooO0O0(i);
        o000O00.o0000O o0000oOooO00o = o000oo2.OooO00o();
        OooOO0 oooOO0 = (OooOO0) this.f30139OooOoO;
        OooO0o oooO0o = (OooO0o) this.f30141OooOoOO;
        o0o0Oo o0o0ooOooO0oo = OooO0oo(OooO0oO(o0000oOooO00o, oooOO0, oooO0o, oooO0OO.f30340OooO0OO), oooO0o);
        if (z) {
            ((OooO0O0) this.f30136OooOo).OooO0Oo(o0o0ooOooO0oo, oooO0OO.f30338OooO00o, zEquals);
        } else {
            ((o000O0O.OooO) this.f30142OooOoo).f30100OooO0O0.OooO00o(new o0000O0(this, o0o0ooOooO0oo, oooO0OO, zEquals, 10));
        }
    }

    public o00000oo.o000oOoO OooOo0(byte[] bArr) {
        try {
            this.f30141OooOoOO = new o0000O0O.OooO0OO().OooO0OO((String) this.f30139OooOoO);
            try {
                return new o00000oo.o000oOoO((oo00o) ((o00O0O0) Oooo.OooOo00.OooOOOo(new o00000oo.o000oOoO(new ByteArrayInputStream(bArr), 1), (o0000O0O.OooO0O0) this.f30141OooOoOO).f13712OooOo0o).OooOo0(), 3);
            } catch (IOException | GeneralSecurityException e) {
                try {
                    return OooOo00(bArr);
                } catch (IOException unused) {
                    throw e;
                }
            }
        } catch (GeneralSecurityException | ProviderException e2) {
            try {
                o00000oo.o000oOoO o000ooooOooOo00 = OooOo00(bArr);
                Log.w("OooO00o", "cannot use Android Keystore, it'll be disabled", e2);
                return o000ooooOooOo00;
            } catch (IOException unused2) {
                throw e2;
            }
        }
    }

    public o0000O0O.OooO0O0 OooOo0O() throws KeyStoreException {
        o0000O0O.OooO0OO oooO0OO = new o0000O0O.OooO0OO();
        try {
            boolean zOooO00o = o0000O0O.OooO0OO.OooO00o((String) this.f30139OooOoO);
            try {
                return oooO0OO.OooO0OO((String) this.f30139OooOoO);
            } catch (GeneralSecurityException | ProviderException e) {
                if (!zOooO00o) {
                    throw new KeyStoreException(OooOo.OooOO0O("the master key ", (String) this.f30139OooOoO, " exists but is unusable"), e);
                }
                Log.w("OooO00o", "cannot use Android Keystore, it'll be disabled", e);
                return null;
            }
        } catch (GeneralSecurityException | ProviderException e2) {
            Log.w("OooO00o", "cannot use Android Keystore, it'll be disabled", e2);
            return null;
        }
    }

    public void OooOoO(String str) {
        if (!str.startsWith("android-keystore://")) {
            throw new IllegalArgumentException("key URI must start with android-keystore://");
        }
        this.f30139OooOoO = str;
    }

    /* JADX WARN: Unsupported multi-entry loop pattern (BACK_EDGE: B:147:? -> B:125:0x0138). Please report as a decompilation issue!!! */
    public Task OooOoO0(Executor executor, String str) {
        o000Ooo.OooOo oooOo;
        ArrayBlockingQueue arrayBlockingQueue;
        TaskCompletionSource taskCompletionSource;
        ArrayList arrayListOooO0O0 = ((OooO0O0) this.f30136OooOo).OooO0O0();
        ArrayList arrayList = new ArrayList();
        int size = arrayListOooO0O0.size();
        int i = 0;
        while (i < size) {
            int i2 = i + 1;
            File file = (File) arrayListOooO0O0.get(i);
            try {
                o000O00O.OooO00o oooO00o = OooO0O0.f30129OooO0oO;
                String strOooO0o0 = OooO0O0.OooO0o0(file);
                oooO00o.getClass();
                arrayList.add(new o000Ooo.OooOo(o000O00O.OooO00o.OooO(strOooO0o0), file.getName(), file));
            } catch (IOException e) {
                Log.w("FirebaseCrashlytics", "Could not load report file " + file + "; deleting", e);
                file.delete();
            }
            i = i2;
        }
        ArrayList arrayList2 = new ArrayList();
        int size2 = arrayList.size();
        int i3 = 0;
        while (i3 < size2) {
            Object obj = arrayList.get(i3);
            i3++;
            o000Ooo.OooOo oooOo2 = (o000Ooo.OooOo) obj;
            if (str == null || str.equals(oooOo2.f30418OooO0O0)) {
                o000OO0O.OooO00o oooO00o2 = (o000OO0O.OooO00o) this.f30140OooOoO0;
                o000O00.o000OOo o000ooo2 = oooOo2.f30417OooO00o;
                boolean z = true;
                if (o000ooo2.f29977OooO0o == null || o000ooo2.f29979OooO0oO == null) {
                    o000Ooo.o00000OO o00000ooOooO0O0 = ((o0000Ooo) this.f30143OooOoo0).OooO0O0(true);
                    o0O0O00 o0o0o00OooO00o = oooOo2.f30417OooO00o.OooO00o();
                    o0o0o00OooO00o.f30046OooO0o0 = o00000ooOooO0O0.f30464OooO00o;
                    o0O0O00 o0o0o00OooO00o2 = o0o0o00OooO00o.OooO00o().OooO00o();
                    o0o0o00OooO00o2.f30045OooO0o = o00000ooOooO0O0.f30465OooO0O0;
                    oooOo = new o000Ooo.OooOo(o0o0o00OooO00o2.OooO00o(), oooOo2.f30418OooO0O0, oooOo2.f30419OooO0OO);
                } else {
                    oooOo = oooOo2;
                }
                boolean z2 = str != null;
                o000OO0O.OooO0OO oooO0OO = oooO00o2.f30201OooO00o;
                ArrayBlockingQueue arrayBlockingQueue2 = oooO0OO.f30211OooO0o;
                synchronized (arrayBlockingQueue2) {
                    try {
                        TaskCompletionSource taskCompletionSource2 = new TaskCompletionSource();
                        if (z2) {
                            ((AtomicInteger) oooO0OO.f30206OooO.f30372OooOo0o).getAndIncrement();
                            if (oooO0OO.f30211OooO0o.size() >= oooO0OO.f30212OooO0o0) {
                                z = false;
                            }
                            if (z) {
                                o000O000.OooO0OO oooO0OO2 = o000O000.OooO0OO.f30095OooO00o;
                                oooO0OO2.OooO0OO("Enqueueing report: " + oooOo.f30418OooO0O0);
                                oooO0OO2.OooO0OO("Queue size: " + oooO0OO.f30211OooO0o.size());
                                try {
                                    arrayBlockingQueue = arrayBlockingQueue2;
                                } catch (Throwable th) {
                                    th = th;
                                    arrayBlockingQueue = arrayBlockingQueue2;
                                    throw th;
                                }
                                try {
                                    taskCompletionSource = taskCompletionSource2;
                                    oooO0OO.f30213OooO0oO.execute(new OoooO0O.o00000OO(oooO0OO, oooOo, taskCompletionSource2, false, 12));
                                    oooO0OO2.OooO0OO("Closing task for report: " + oooOo.f30418OooO0O0);
                                    taskCompletionSource.trySetResult(oooOo);
                                } catch (Throwable th2) {
                                    th = th2;
                                    throw th;
                                }
                            } else {
                                taskCompletionSource = taskCompletionSource2;
                                oooO0OO.OooO00o();
                                String str2 = "Dropping report due to queue being full: " + oooOo.f30418OooO0O0;
                                if (Log.isLoggable("FirebaseCrashlytics", 3)) {
                                    Log.d("FirebaseCrashlytics", str2, null);
                                }
                                ((AtomicInteger) oooO0OO.f30206OooO.f30370OooOo).getAndIncrement();
                                taskCompletionSource.trySetResult(oooOo);
                            }
                        } else {
                            taskCompletionSource = taskCompletionSource2;
                            oooO0OO.OooO0O0(oooOo, taskCompletionSource);
                        }
                    } catch (Throwable th3) {
                        th = th3;
                        arrayBlockingQueue = arrayBlockingQueue2;
                    }
                }
                arrayList2.add(taskCompletionSource.getTask().continueWith(executor, new o00Oo0(this, 25)));
            }
        }
        return Tasks.whenAll(arrayList2);
    }

    public void OooOoOO(Context context, String str, String str2) {
        if (context == null) {
            throw new IllegalArgumentException("need an Android context");
        }
        if (str == null) {
            throw new IllegalArgumentException("need a keyset name");
        }
        this.f30136OooOo = context;
        this.f30138OooOo0o = str;
        this.f30140OooOoO0 = str2;
    }

    @Override // OoooO0O.o00O000
    /* renamed from: OooOoo0 */
    public o00O0O0O zza() {
        Application application = (Application) ((OooOOoo.o0000OO0) this.f30138OooOo0o).f13531OooOo0o;
        Handler handler = OoooO0O.o000O0o.f13967OooO00o;
        OoooO0O.o000Oo0.OooO0OO(handler);
        o000O000 o000o0002 = OoooO0O.o000O0o.f13968OooO0O0;
        OoooO0O.o000Oo0.OooO0OO(o000o0002);
        return new o00O0O0O(application, handler, o000o0002, (o0OOO0o) ((OoooO0O.o0O0ooO) this.f30140OooOoO0).zza(), (OoooO0O.o000OOo) ((OoooO0O.o0O0ooO) this.f30139OooOoO).zza(), ((o00O00o0) this.f30141OooOoOO).OooO00o(), ((Oooo.OooOo00) this.f30143OooOoo0).OooOOo(), (o00O000o) ((OoooO0O.o0O0ooO) this.f30142OooOoo).zza());
    }

    @Override // o00O00oO.o0000O0
    public Object get() {
        switch (this.f30137OooOo0O) {
            case 1:
                return new OooOo0o.Oooo0((Context) ((OooOOoo.o0000OO0) this.f30138OooOo0o).f13531OooOo0o, (Oooo000) ((o00O00oO.o0000O0) this.f30136OooOo).get(), (OooOo.OooO0o) ((o00O00oO.o0000O0) this.f30140OooOoO0).get(), (OooOo0o.OooOOO0) ((Oooo.OooOo00) this.f30139OooOoO).get(), (Executor) ((o00O00oO.o0000O0) this.f30141OooOoOO).get(), (OooOoO0.o0O0O00) ((o00O00oO.o0000O0) this.f30143OooOoo0).get(), new o000OOoO.OooO(4), new o000000.OooO(4), (OooOo.OooO0OO) ((o00O00oO.o0000O0) this.f30142OooOoo).get());
            default:
                return new o000o00o.o00O0O00((oo000o) ((o000o0O0.OooOOO) this.f30138OooOo0o).get(), (o000o00o.o00O0000) ((o000o0O0.OooOOO) this.f30136OooOo).get(), (o000o00o.o000O0O0) ((o000o0O0.OooOOO) this.f30140OooOoO0).get(), (oo0o0O0) ((o000o0O0.OooOOO) this.f30139OooOoO).get(), (DataStore) ((o000o0O0.OooOOO) this.f30141OooOoOO).get(), (o000o00o.o0000O) ((o000o0O0.OooOOO) this.f30143OooOoo0).get(), (o00O0O0O.OooOOO0) ((o000o0O0.OooOOO) this.f30142OooOoo).get());
        }
    }

    public OooO0o(int i) {
        this.f30137OooOo0O = i;
        switch (i) {
            case 4:
                this.f30136OooOo = null;
                this.f30138OooOo0o = null;
                this.f30140OooOoO0 = null;
                this.f30139OooOoO = null;
                this.f30141OooOoOO = null;
                this.f30143OooOoo0 = null;
                break;
            default:
                this.f30138OooOo0o = new AtomicBoolean();
                this.f30136OooOo = null;
                this.f30140OooOoO0 = new HashMap(16, 1.0f);
                this.f30139OooOoO = new HashMap(16, 1.0f);
                this.f30141OooOoOO = new HashMap(16, 1.0f);
                this.f30143OooOoo0 = new HashMap(16, 1.0f);
                this.f30142OooOoo = null;
                break;
        }
    }

    @Override // o0000oo0.o00Ooo
    public Object get(Class cls) {
        if (((Set) this.f30138OooOo0o).contains(o00000OO.OooO00o(cls))) {
            Object obj = ((o00Ooo) this.f30142OooOoo).get(cls);
            return !cls.equals(o000OOo0.OooO0O0.class) ? obj : new o0000oo0.o0000Ooo((Set) this.f30143OooOoo0, (o000OOo0.OooO0O0) obj);
        }
        throw new OooOOO0.OooO00o("Attempting to request an undeclared dependency " + cls + ".");
    }

    public OooO0o(o0000oo0.o00Oo0 o00oo0, o00Ooo o00ooo2) {
        this.f30137OooOo0O = 5;
        HashSet hashSet = new HashSet();
        HashSet hashSet2 = new HashSet();
        HashSet hashSet3 = new HashSet();
        HashSet hashSet4 = new HashSet();
        HashSet hashSet5 = new HashSet();
        for (oo0o0Oo oo0o0oo : o00oo0.f29672OooO0OO) {
            int i = oo0o0oo.f29695OooO0OO;
            boolean z = i == 0;
            int i2 = oo0o0oo.f29694OooO0O0;
            o00000OO o00000oo2 = oo0o0oo.f29693OooO00o;
            if (z) {
                if (i2 == 2) {
                    hashSet4.add(o00000oo2);
                } else {
                    hashSet.add(o00000oo2);
                }
            } else if (i == 2) {
                hashSet3.add(o00000oo2);
            } else if (i2 == 2) {
                hashSet5.add(o00000oo2);
            } else {
                hashSet2.add(o00000oo2);
            }
        }
        Set set = o00oo0.f29676OooO0oO;
        if (!set.isEmpty()) {
            hashSet.add(o00000OO.OooO00o(o000OOo0.OooO0O0.class));
        }
        this.f30138OooOo0o = Collections.unmodifiableSet(hashSet);
        this.f30136OooOo = Collections.unmodifiableSet(hashSet2);
        this.f30140OooOoO0 = Collections.unmodifiableSet(hashSet3);
        this.f30139OooOoO = Collections.unmodifiableSet(hashSet4);
        this.f30141OooOoOO = Collections.unmodifiableSet(hashSet5);
        this.f30143OooOoo0 = set;
        this.f30142OooOoo = o00ooo2;
    }

    public OooO0o(Context context) throws NoSuchAlgorithmException {
        String string;
        String strReplaceAll;
        this.f30137OooOo0O = 0;
        String str = ((o000O00.o000OO0O) o000O000.OooO0OO.f30096OooO0O0.OooO0o0(context)).f29969OooO00o;
        this.f30138OooOo0o = str;
        File filesDir = context.getFilesDir();
        this.f30136OooOo = filesDir;
        if (!str.isEmpty()) {
            StringBuilder sb = new StringBuilder(".crashlytics.v3");
            sb.append(File.separator);
            if (str.length() > 40) {
                strReplaceAll = o00O0O.OooO0oo(str);
            } else {
                strReplaceAll = str.replaceAll("[^a-zA-Z0-9.]", "_");
            }
            sb.append(strReplaceAll);
            string = sb.toString();
        } else {
            string = ".com.google.firebase.crashlytics.files.v1";
        }
        File file = new File(filesDir, string);
        OooOOo(file);
        this.f30140OooOoO0 = file;
        File file2 = new File(file, "open-sessions");
        OooOOo(file2);
        this.f30139OooOoO = file2;
        File file3 = new File(file, "reports");
        OooOOo(file3);
        this.f30141OooOoOO = file3;
        File file4 = new File(file, "priority-reports");
        OooOOo(file4);
        this.f30143OooOoo0 = file4;
        File file5 = new File(file, "native-reports");
        OooOOo(file5);
        this.f30142OooOoo = file5;
    }

    public OooO0o(String str, OooO0o oooO0o, o000O0O.OooO oooO) {
        this.f30137OooOo0O = 6;
        this.f30139OooOoO = new o0O0oo00(this, false);
        this.f30141OooOoOO = new o0O0oo00(this, true);
        this.f30143OooOoo0 = new o000oOoO();
        this.f30142OooOoo = new AtomicMarkableReference(null, false);
        this.f30138OooOo0o = str;
        this.f30136OooOo = new o000Oo0.OooOOO0(oooO0o);
        this.f30140OooOoO0 = oooO;
    }
}
